<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" />
  <title>Top Up Clover Coins - TradeHax</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" integrity="sha512-wnea99uKIC3TJF7v4eKk4Y+lMz2Mklv18+r4na2Gn1abDRPPOeef95xTzdwGD9e6zXJBteMIhZ1+68QC5byJZw==" crossorigin="anonymous" />
  <style>
    body { 
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); 
      min-height: 100vh; 
    }
    .coin-package {
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .coin-package:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }
  </style>
</head>
<body class="text-white">
  <div class="max-w-4xl mx-auto p-6">
    <div class="flex items-start justify-between mb-6">
      <div>
        <h1 class="text-3xl font-extrabold">ğŸ’° Top Up Clover Coins</h1>
        <p class="text-gray-300">Get more play time for retro arcade games!</p>
      </div>
      <div id="wallet-container"></div>
    </div>

    <div class="bg-yellow-900 bg-opacity-30 border border-yellow-500 rounded-lg p-4 mb-6">
      <div class="flex items-center gap-2">
        <span class="text-2xl">â°</span>
        <div>
          <div class="font-bold text-yellow-300">Play Time Pricing</div>
          <div class="text-sm text-gray-300">â˜˜ï¸ 5 Clover Coins = 1 Minute of Play</div>
          <div class="text-xs text-gray-400 mt-1">Example: 300 coins = 1 hour of retro arcade fun!</div>
        </div>
      </div>
    </div>

    <div class="mb-8">
      <h2 class="text-xl font-bold mb-4 text-green-400">ğŸ’³ Choose Your Package</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <!-- Starter Pack -->
        <div class="coin-package bg-black bg-opacity-40 border border-green-500/30 rounded-lg p-6 text-center">
          <div class="text-4xl mb-3">ğŸ€</div>
          <div class="text-2xl font-bold text-white mb-2">Starter Pack</div>
          <div class="text-4xl font-extrabold text-green-400 mb-2">150 Coins</div>
          <div class="text-gray-400 mb-4">= 30 minutes play time</div>
          <div class="text-3xl font-bold text-white mb-4">$4.99</div>
          <button class="topup-btn w-full px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg font-semibold" data-coins="150" data-price="4.99">
            Buy Now
          </button>
        </div>

        <!-- Popular Pack -->
        <div class="coin-package bg-black bg-opacity-40 border-2 border-yellow-500 rounded-lg p-6 text-center relative">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-black px-3 py-1 rounded-full text-xs font-bold">
            MOST POPULAR
          </div>
          <div class="text-4xl mb-3">â˜˜ï¸</div>
          <div class="text-2xl font-bold text-white mb-2">Value Pack</div>
          <div class="text-4xl font-extrabold text-yellow-400 mb-2">500 Coins</div>
          <div class="text-gray-400 mb-4">= 100 minutes play time</div>
          <div class="text-3xl font-bold text-white mb-4">$14.99</div>
          <button class="topup-btn w-full px-4 py-2 bg-yellow-600 hover:bg-yellow-500 rounded-lg font-semibold" data-coins="500" data-price="14.99">
            Buy Now
          </button>
          <div class="text-xs text-green-400 mt-2">Save 10%</div>
        </div>

        <!-- Premium Pack -->
        <div class="coin-package bg-black bg-opacity-40 border border-purple-500/30 rounded-lg p-6 text-center">
          <div class="text-4xl mb-3">ğŸ€âœ¨</div>
          <div class="text-2xl font-bold text-white mb-2">Premium Pack</div>
          <div class="text-4xl font-extrabold text-purple-400 mb-2">1200 Coins</div>
          <div class="text-gray-400 mb-4">= 4 hours play time</div>
          <div class="text-3xl font-bold text-white mb-4">$29.99</div>
          <button class="topup-btn w-full px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg font-semibold" data-coins="1200" data-price="29.99">
            Buy Now
          </button>
          <div class="text-xs text-green-400 mt-2">Save 20%</div>
        </div>

      </div>
    </div>

    <div class="bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-6 mb-6">
      <h3 class="font-bold text-blue-300 mb-3">ğŸ’¡ Ways to Get Free Coins</h3>
      <ul class="space-y-2 text-sm text-gray-300">
        <li>ğŸ <strong>Snake:</strong> Earn 0.1 coins per point, 5 per level</li>
        <li>ğŸ§± <strong>Tetris:</strong> Get 1 coin per line, 10 for Tetris clear</li>
        <li>ğŸƒ <strong>Spades:</strong> Win 10 coins per hand, 100 for game victory</li>
        <li>ğŸ§  <strong>Memory:</strong> Earn 2 coins per match, 20 for completing game</li>
      </ul>
      <a href="/games/" class="inline-block mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg font-semibold">
        Play Games to Earn â†’
      </a>
    </div>

    <div id="payment-status" class="text-center text-sm mb-6"></div>

    <div class="text-center">
      <a href="/games/retro.html" class="text-green-400 hover:text-green-300">â† Back to Arcade</a>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="web3-rewards.js"></script>
  <script>
    let rewards;

    function setStatus(msg, color = 'gray') {
      const el = document.getElementById('payment-status');
      el.textContent = msg;
      el.className = `text-center text-sm mb-6 text-${color}-400`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      rewards = new Web3RewardsSystem('topup');
      rewards.initWalletUI('wallet-container');

      // Handle top-up button clicks
      document.querySelectorAll('.topup-btn').forEach(btn => {
        btn.addEventListener('click', async () => {
          const coins = parseInt(btn.dataset.coins);
          const price = parseFloat(btn.dataset.price);
          
          if (!rewards.walletConnected) {
            setStatus('Please connect your wallet first', 'red');
            return;
          }

          setStatus(`Processing payment for ${coins} coins ($${price})...`, 'blue');
          
          // TODO: Integrate with your payment provider
          // For now, simulate purchase
          try {
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Add coins to user's balance
            rewards.totalCoins += coins;
            rewards.saveState();
            rewards.updateUI();
            
            setStatus(`âœ“ Success! Added ${coins} coins to your balance!`, 'green');
            
            // Show success animation
            btn.textContent = 'âœ“ Purchased!';
            btn.disabled = true;
            
            setTimeout(() => {
              btn.textContent = 'Buy Again';
              btn.disabled = false;
            }, 3000);
            
          } catch (e) {
            setStatus(`âœ— Payment failed: ${e.message}`, 'red');
          }
        });
      });
    });
  </script>
</body>
</html>
